---
import Landing from '@layouts/Landing.astro';

import McButton from '@components/mc/Button.vue';
import McButtonsGroup from '@components/ButtonsGroup.vue';
import MCCard from '@components/mc/Card.astro';

import CardAddress from '@components/CardAddress.astro';
import CardMod from '@components/CardMod.astro';
import CardNews from '@components/CardNews.astro';
import ListOfPlayers from '@components/ListOfPlayers.vue';
import Spacer from '@components/Spacer.astro';

const address = 'mc.shizo-land.ru'

// Plugins
import plugins from '@_data/plugins.json';

import { getCollection } from 'astro:content';

const allNews = (await getCollection("news")).sort(
  (a, b) => Date.parse(b.data.date_added) - Date.parse(a.data.date_added)
);

---

<Landing>
	<Spacer />

	<MCCard mode="blank">
		<CardAddress address={address} />
	</MCCard>

	<MCCard title="Список активных игроков">
		<ListOfPlayers client:only="vue" address={address} />
	</MCCard>

	<MCCard title="Рекомендуемые моды" mode="blank">
		{ plugins.map(item =>
			<CardMod title={item.title} info={item.info} url={item.url} icon={item.icon} />
		)}

		<McButtonsGroup slot="footer">
			<McButton stretched="true" component="a" href="https://modrinth.com/collection/pDf8krcz" target="_blank">Скачать сборку</McButton>
		</McButtonsGroup>
	</MCCard>

	<MCCard title="Последние новости" mode="blank">
		{
			allNews.map(news => (
				<CardNews title={news.data.title} caption={news.data.caption} date_added={news.data.date_added} slug={news.slug} />
			))
		}
		
		<McButtonsGroup slot="footer">
			<McButton stretched="true" component="a" href="/news/">Все новости</McButton>
		</McButtonsGroup>
	</MCCard>


	<MCCard title="Помощь">
		<McButton stretched="true" component="a" href="https://modrinth.com/app" target="_blank">Лаунчер</McButton>
		<McButton stretched="true" component="a" href="https://hotmc.ru/minecraft-server-268678" target="_blank">Проголосовать</McButton>
	</MCCard>

	<Spacer />

</Landing>

<style>

</style>
